=== RUN   TestFrameworkRollback
[2023/08/07 10:54:34.425 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/07 10:54:34.429 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:34.429 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:34.432 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:34.433 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:34.435 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:34.439 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=b7af7d3c-3665-4ae2-a157-fe418cea2d0a] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:34.454 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:34.454 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:34.472 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkRollback\n\t/Users/zzywq/code/tidb/disttask/framework/framework_rollback_test.go:125\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/07 10:54:34.486 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=11.390875ms]
[2023/08/07 10:54:34.487 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:34.487 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=0c9e04de-566a-4505-ba82-74aff7ee2c54] [runWorker=true]
[2023/08/07 10:54:34.487 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:34.487 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:34.488 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:34.488 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:34.488 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:34.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:34.488 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:34.491 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/07 10:54:34.505 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:34.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/07 10:54:34.506 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:34.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.520 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.542 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=9.376167ms]
[2023/08/07 10:54:34.542 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:34.545 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.545 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/07 10:54:34.546 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=14.245583ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:34.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.570 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.576 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/07 10:54:34.576 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:34.577 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/07 10:54:34.580 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/07 10:54:34.600 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.583 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.600 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.583 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/07 10:54:34.619 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.583 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.666 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=5.521291ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/07 10:54:34.668 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.668 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/07 10:54:34.670 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=10.142958ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.583 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.689 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.583 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.716 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/07 10:54:34.716 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:34.717 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/07 10:54:34.728 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.728 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/07 10:54:34.746 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.758 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=1.001291ms] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/07 10:54:34.760 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.760 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/07 10:54:34.761 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.054583ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.769 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.781 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/07 10:54:34.781 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:34.782 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/07 10:54:34.791 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.786 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.791 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.786 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/07 10:54:34.817 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.786 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.827 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=815.375µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/07 10:54:34.829 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.829 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/07 10:54:34.830 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.257583ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.786 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.839 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.786 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.846 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/07 10:54:34.846 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:34.848 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/07 10:54:34.859 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.859 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/07 10:54:34.871 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.895 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.942417ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/07 10:54:34.898 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.898 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/07 10:54:34.898 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.018458ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.911 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.928 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/07 10:54:34.928 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:34.929 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/07 10:54:34.937 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.932 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:34.938 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.932 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/07 10:54:34.959 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.932 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:34.979 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=2.149666ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/07 10:54:34.984 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:34.984 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/07 10:54:34.985 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=8.284917ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:34.932 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.013 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:34.932 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.023 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/07 10:54:35.023 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.025 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/07 10:54:35.034 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.028 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.034 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.028 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/07 10:54:35.062 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.028 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.078 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.589375ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.084 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.084 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/07 10:54:35.084 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=8.142542ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.028 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.118 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.028 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.133 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/07 10:54:35.133 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.139 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/07 10:54:35.151 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.151 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/07 10:54:35.190 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.199 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=700.75µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.201 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.201 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/07 10:54:35.203 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.059709ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.215 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.223 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/07 10:54:35.223 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.224 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/07 10:54:35.245 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.228 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.245 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.228 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/07 10:54:35.256 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.228 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.270 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=848.334µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.272 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.272 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/07 10:54:35.273 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.07825ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.228 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.284 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.228 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.294 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/07 10:54:35.294 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.297 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/07 10:54:35.308 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.308 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/07 10:54:35.339 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.355 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=5.429542ms] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.368 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.369 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/07 10:54:35.370 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=20.342875ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.384 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.393 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/07 10:54:35.393 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.395 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/07 10:54:35.403 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.403 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/07 10:54:35.428 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.445 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=1.124084ms] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.447 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.447 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/07 10:54:35.450 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=6.041875ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.460 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.469 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/07 10:54:35.469 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.470 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:35.470 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/07 10:54:35.484 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.484 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:35.489 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:35.490 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:35.502 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.528 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=3.766292ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.530 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.530 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/07 10:54:35.533 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=9.247958ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.556 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.581 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/07 10:54:35.581 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.583 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/07 10:54:35.603 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.604 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/07 10:54:35.626 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.645 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.779875ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.647 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.648 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/07 10:54:35.649 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=6.192417ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.663 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.692 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/07 10:54:35.692 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.693 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:35.710 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.706 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.710 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.706 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:35.746 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.706 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.763 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=1.140583ms] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.765 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.765 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/07 10:54:35.768 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=6.765417ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.706 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.793 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.706 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.801 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/07 10:54:35.801 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.802 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:35.813 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.806 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.813 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.806 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:35.825 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.806 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.840 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=1.037583ms] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.842 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.842 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/07 10:54:35.849 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.14775ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.806 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.880 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.806 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.889 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/07 10:54:35.889 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.890 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:35.901 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:35.902 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:35.942 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.958 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=1.606375ms] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/07 10:54:35.961 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:35.961 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/07 10:54:35.963 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=6.143917ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.982 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:35.992 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/07 10:54:35.993 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:35.994 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/07 10:54:36.010 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.010 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/07 10:54:36.040 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.061 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=1.087459ms] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.063 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.063 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/07 10:54:36.065 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=5.583709ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:35.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.092 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:35.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.105 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/07 10:54:36.105 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.106 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/07 10:54:36.114 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.109 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.114 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.109 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/07 10:54:36.159 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.109 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.174 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=1.788209ms] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.179 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.179 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/07 10:54:36.180 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=8.068167ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.109 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.200 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.109 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.213 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/07 10:54:36.213 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.214 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:36.226 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.226 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:36.267 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.290 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=3.837375ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.297 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.298 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/07 10:54:36.298 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=12.065042ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.336 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.356 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/07 10:54:36.356 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.366 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:36.388 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.388 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:36.405 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.423 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=1.889959ms] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.426 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.426 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/07 10:54:36.429 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=8.780959ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.452 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.469 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/07 10:54:36.469 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.471 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/07 10:54:36.486 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.477 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.487 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.477 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/07 10:54:36.488 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:36.491 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:36.491 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:36.540 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.477 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.568 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=1.835125ms] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.592 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.592 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/07 10:54:36.593 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=30.24025ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.477 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.651 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.477 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.671 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/07 10:54:36.671 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.673 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/07 10:54:36.682 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.682 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/07 10:54:36.709 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.717 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=574.209µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.719 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.719 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/07 10:54:36.720 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.01825ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.769 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.790 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/07 10:54:36.790 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.791 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/07 10:54:36.821 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.801 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.822 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.801 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/07 10:54:36.838 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.801 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.852 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.531541ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.854 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.854 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/07 10:54:36.856 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=6.343541ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.801 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.877 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.801 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.892 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/07 10:54:36.892 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.893 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/07 10:54:36.899 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.895 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.900 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.895 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/07 10:54:36.917 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.895 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.927 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=1.03625ms] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.930 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.930 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/07 10:54:36.930 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.084ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.895 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.938 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.895 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.945 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/07 10:54:36.945 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.946 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:36.951 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.948 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:36.951 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.948 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:36.967 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.948 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.977 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=937.708µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/07 10:54:36.979 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:36.979 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/07 10:54:36.979 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.032209ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.948 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.987 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.948 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:36.994 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/07 10:54:36.994 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:36.995 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/07 10:54:37.001 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.997 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.001 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.997 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/07 10:54:37.010 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.997 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.019 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=921.333µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.021 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.021 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/07 10:54:37.022 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.22475ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:36.997 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.030 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:36.997 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.036 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/07 10:54:37.036 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.037 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/07 10:54:37.042 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.039 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.042 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.039 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/07 10:54:37.051 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.039 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.060 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=880.417µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.062 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.062 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/07 10:54:37.063 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.105333ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.039 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.070 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.039 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.076 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/07 10:54:37.076 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.077 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:37.083 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.083 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:37.092 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.101 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=975.042µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.103 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.103 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/07 10:54:37.104 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.160792ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.112 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.119 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/07 10:54:37.119 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.119 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/07 10:54:37.125 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.125 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/07 10:54:37.135 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.144 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=894.416µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.146 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.146 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/07 10:54:37.147 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.07925ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.155 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.161 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/07 10:54:37.161 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.162 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:37.163 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/07 10:54:37.173 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.169 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.173 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.169 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:37.183 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.169 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.195 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=1.132917ms] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.196 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.197 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/07 10:54:37.197 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.056209ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.169 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.206 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.169 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.222 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/07 10:54:37.222 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.223 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:37.230 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.230 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:37.240 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.252 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.27825ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.254 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.254 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/07 10:54:37.255 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.039291ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.262 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.270 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/07 10:54:37.270 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.271 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:37.277 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.277 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:37.286 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.298 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.33725ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.300 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.300 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/07 10:54:37.300 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.113666ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.308 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.317 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/07 10:54:37.317 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.319 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/07 10:54:37.327 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.321 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.327 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.321 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/07 10:54:37.353 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.321 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.369 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.877375ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.372 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.372 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/07 10:54:37.373 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=6.170875ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.321 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.383 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.321 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.393 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/07 10:54:37.393 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.394 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/07 10:54:37.402 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.402 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/07 10:54:37.415 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.422 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=581.042µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.424 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.424 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/07 10:54:37.425 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.013875ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.432 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.398 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.438 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/07 10:54:37.438 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.447 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:37.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.447 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:37.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/07 10:54:37.456 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.481 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=1.31175ms] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/07 10:54:37.483 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.483 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/07 10:54:37.486 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=6.461291ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:37.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.489 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:37.489 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:37.497 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.508 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/07 10:54:37.508 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.510 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/07 10:54:37.518 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.519 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/07 10:54:37.539 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.553 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=1.507208ms] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.558 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.558 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/07 10:54:37.559 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=8.131417ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.570 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.578 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/07 10:54:37.578 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.578 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/07 10:54:37.584 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.581 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.584 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.581 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/07 10:54:37.595 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.581 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.606 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=879.583µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.608 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.608 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/07 10:54:37.609 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.331ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.581 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.619 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.581 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.625 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/07 10:54:37.625 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.626 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/07 10:54:37.632 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.628 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.632 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.628 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/07 10:54:37.641 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.628 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.650 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=801µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.652 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.652 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/07 10:54:37.653 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.146584ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.628 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.665 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.628 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.671 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/07 10:54:37.671 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.673 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/07 10:54:37.682 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.682 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/07 10:54:37.693 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.712 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=2.181083ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.714 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.714 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/07 10:54:37.715 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=6.141042ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.725 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.736 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/07 10:54:37.736 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.737 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/07 10:54:37.745 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.739 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.745 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.739 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/07 10:54:37.753 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.739 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.769 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.937584ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.771 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.771 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/07 10:54:37.773 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.112708ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.739 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.782 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.739 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.792 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/07 10:54:37.792 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.793 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/07 10:54:37.802 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.796 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.802 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.796 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/07 10:54:37.813 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.796 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.832 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=2.253125ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.834 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.835 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/07 10:54:37.836 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=6.235917ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.796 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.846 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.796 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.857 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/07 10:54:37.858 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.859 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/07 10:54:37.866 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.866 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/07 10:54:37.876 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.890 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.679834ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.892 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.892 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/07 10:54:37.892 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=4.033334ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.901 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.910 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/07 10:54:37.910 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.911 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/07 10:54:37.920 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.914 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.920 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.914 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/07 10:54:37.930 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.914 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.948 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=2.085584ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/07 10:54:37.950 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:37.950 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/07 10:54:37.952 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=6.17225ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.914 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.963 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.914 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:37.974 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/07 10:54:37.975 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:37.976 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/07 10:54:37.984 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:37.985 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/07 10:54:37.994 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.016 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=2.231959ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/07 10:54:38.018 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:38.018 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/07 10:54:38.019 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=6.142542ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:37.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.029 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:37.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.040 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/07 10:54:38.040 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:38.041 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:38.048 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:38.048 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:38.062 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.075 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.4125ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/07 10:54:38.077 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:38.077 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/07 10:54:38.078 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=4.212333ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.086 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.095 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/07 10:54:38.095 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:38.096 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:38.103 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.099 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:38.103 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.099 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:38.112 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.099 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.124 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.299667ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/07 10:54:38.126 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:38.126 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/07 10:54:38.127 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.050834ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.099 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.135 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.099 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.144 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/07 10:54:38.144 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:38.145 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/07 10:54:38.155 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.147 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:38.155 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.147 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/07 10:54:38.165 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.147 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.186 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.544833ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/07 10:54:38.188 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:38.188 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/07 10:54:38.189 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=6.049167ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.147 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.204 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.147 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.222 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/07 10:54:38.222 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:38.223 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:38.230 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:38.230 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:38.241 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.254 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.444625ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/07 10:54:38.257 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:38.257 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/07 10:54:38.257 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.106792ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:38.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.266 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:38.226 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:38.274 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/07 10:54:38.274 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:38.382 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=3.894063542s]
[2023/08/07 10:54:38.492 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0c9e04de-566a-4505-ba82-74aff7ee2c54] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:38.492 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:38.492 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 3, tp add index"] [category=ddl] ["take time"=3.834µs]
[2023/08/07 10:54:38.492 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 2, tp add index"] [category=ddl] ["take time"=2.209µs]
[2023/08/07 10:54:38.492 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:38.492 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 1, tp general"] [category=ddl] ["take time"=1.917µs]
[2023/08/07 10:54:38.492 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:38.492 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:38.496 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=0c9e04de-566a-4505-ba82-74aff7ee2c54] ["take time"=113.335458ms]
[2023/08/07 10:54:38.496 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=0c9e04de-566a-4505-ba82-74aff7ee2c54]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:38.496 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:38.497 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=113.828084ms]
[2023/08/07 10:54:38.497 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=b7af7d3c-3665-4ae2-a157-fe418cea2d0a] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:38.497 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:38.497 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:38.576 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=62.696875ms]
[2023/08/07 10:54:38.577 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:38.577 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5] [runWorker=true]
[2023/08/07 10:54:38.577 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:38.577 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:38.577 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:38.577 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:38.577 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:38.577 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:38.577 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:38.577 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:38.578 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:38.578 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:38.584 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:38.584 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:38.584 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:54:38.589 +08:00] [INFO] [sysvar.go:2459] ["set resource control"] [enable=true]
[2023/08/07 10:54:38.590 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:38.603 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:38.608 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:38.611 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:38.611 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:54:38.611 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:38.611 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:38.612 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:38.612 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:38.612 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:54:38.613 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=b7af7d3c-3665-4ae2-a157-fe418cea2d0a] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:38.613 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:38.613 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:38.613 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:38.613 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:38.618 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:38.694 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=64.8355ms]
[2023/08/07 10:54:38.695 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:38.695 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0] [runWorker=true]
[2023/08/07 10:54:38.696 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:38.696 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:38.696 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:38.696 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:38.696 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:38.696 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:38.705 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:38.705 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:38.705 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:54:38.741 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:38.750 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:38.753 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:38.753 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:54:38.753 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:38.753 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:38.754 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:38.754 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:38.754 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[0b3f6139-88b4-45c6-b48e-290dc77e2dd5,62ef92ce-2348-4473-b880-2315b394fed0]"]
[2023/08/07 10:54:38.754 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:54:38.755 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:38.755 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:38.796 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:38.796 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:39.755 +08:00] [INFO] [dispatcher_manager.go:128] ["dispatch task loop start"]
[2023/08/07 10:54:39.755 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/07 10:54:39.755 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/07 10:54:40.058 +08:00] [INFO] [dispatcher.go:84] ["execute one task"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8]
[2023/08/07 10:54:40.559 +08:00] [INFO] [dispatcher.go:174] ["handle pending state"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [stage=-1]
[2023/08/07 10:54:40.559 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/07 10:54:40.577 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:40.696 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:40.718 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:40.718 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/07 10:54:40.860 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:40.860 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/07 10:54:41.022 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:54:41.027 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/07 10:54:41.027 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.027 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.027 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.032 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/07 10:54:41.032 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.032 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.032 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:41.061 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:54:41.161 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=cancelling]
[2023/08/07 10:54:41.337 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=cancelling]
[2023/08/07 10:54:41.559 +08:00] [INFO] [dispatcher.go:150] ["handle cancelling state"] [dispatcher="task_id: 1, task_type: Example"] [state=cancelling] [stage=1]
[2023/08/07 10:54:41.615 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:41.618 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:41.618 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/07 10:54:41.758 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:41.761 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:41.761 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/07 10:54:41.915 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:41.921 +08:00] [INFO] [scheduler.go:275] ["scheduler rollback a step"] [scheduler="id: :4000, task_id: 1"] [step=1]
[2023/08/07 10:54:42.063 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:42.063 +08:00] [INFO] [dispatcher.go:155] ["handle reverting state"] [dispatcher="task_id: 1, task_type: Example"] [state=reverting] [stage=1]
[2023/08/07 10:54:42.069 +08:00] [INFO] [scheduler.go:275] ["scheduler rollback a step"] [scheduler="id: :4001, task_id: 1"] [step=1]
[2023/08/07 10:54:42.216 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:42.360 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:42.520 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:42.560 +08:00] [INFO] [dispatcher.go:155] ["handle reverting state"] [dispatcher="task_id: 1, task_type: Example"] [state=reverting] [stage=1]
[2023/08/07 10:54:42.565 +08:00] [INFO] [dispatcher.go:164] ["update the task to reverted state"] [dispatcher="task_id: 1, task_type: Example"]
[2023/08/07 10:54:42.695 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=reverted]
[2023/08/07 10:54:42.846 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=reverted]
[2023/08/07 10:54:43.059 +08:00] [INFO] [dispatcher.go:130] ["schedule task, task is finished"] [dispatcher="task_id: 1, task_type: Example"] [state=reverted]
[2023/08/07 10:54:43.580 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:43.580 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:43.580 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 5, tp add index"] [category=ddl] ["take time"=6.792µs]
[2023/08/07 10:54:43.580 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 6, tp add index"] [category=ddl] ["take time"=9.208µs]
[2023/08/07 10:54:43.580 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:43.580 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 4, tp general"] [category=ddl] ["take time"=2.625µs]
[2023/08/07 10:54:43.580 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:43.580 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:43.581 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5] ["take time"=816.478083ms]
[2023/08/07 10:54:43.581 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5]
[2023/08/07 10:54:43.581 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:43.581 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:43.581 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.581 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:43.582 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:43.583 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:43.582 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.582 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:43.583 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:43.583 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:43.583 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:54:43.583 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:43.583 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:54:43.583 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:43.584 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:54:43.584 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:54:43.584 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:43.612 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0b3f6139-88b4-45c6-b48e-290dc77e2dd5] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:54:43.612 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:43.612 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=847.966166ms]
[2023/08/07 10:54:43.754 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=62ef92ce-2348-4473-b880-2315b394fed0]
[2023/08/07 10:54:43.755 +08:00] [INFO] [dispatcher_manager.go:134] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/07 10:54:43.755 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=62ef92ce-2348-4473-b880-2315b394fed0]
[2023/08/07 10:54:43.755 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/07 10:54:43.756 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 8, tp add index"] [category=ddl] ["take time"=10.833µs]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 9, tp add index"] [category=ddl] ["take time"=6.166µs]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 7, tp general"] [category=ddl] ["take time"=20.25µs]
[2023/08/07 10:54:43.756 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:43.756 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0] ["take time"=992.114792ms]
[2023/08/07 10:54:43.756 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0]
[2023/08/07 10:54:43.756 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:43.756 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.756 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.756 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.756 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:43.757 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:43.757 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.757 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.757 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.757 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:54:43.758 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:43.758 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:43.758 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:54:43.758 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:43.758 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:44.705 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:54:44.705 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:54:44.705 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:44.754 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=62ef92ce-2348-4473-b880-2315b394fed0] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:54:44.754 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:44.754 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.990041792s]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/07 10:54:44.783 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkRollback (10.54s)
=== RUN   TestFrameworkWithQuery
[2023/08/07 10:54:44.931 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/07 10:54:44.931 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:44.931 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:44.933 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:44.933 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:44.934 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:44.938 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=826fcf26-2069-47d6-b77c-4981916315b4] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:44.938 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:44.938 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:44.955 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkWithQuery\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:257\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/07 10:54:44.965 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=9.486667ms]
[2023/08/07 10:54:44.965 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:44.965 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=78715843-59e9-4dfe-933d-b041e18c11ea] [runWorker=true]
[2023/08/07 10:54:44.966 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:44.966 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:44.966 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:44.966 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:44.966 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:44.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:44.966 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:44.967 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:44.968 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/07 10:54:44.972 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:44.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:44.972 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:44.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/07 10:54:44.982 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:44.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:44.995 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=9.239292ms]
[2023/08/07 10:54:44.995 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:44.998 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:44.998 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/07 10:54:45.000 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=14.150625ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:44.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.007 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:44.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.011 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/07 10:54:45.011 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.011 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/07 10:54:45.014 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/07 10:54:45.031 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.016 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.031 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.016 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/07 10:54:45.043 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.016 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.086 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=5.3935ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.088 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.088 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/07 10:54:45.088 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=8.032458ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.016 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.103 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.016 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.127 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/07 10:54:45.127 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.128 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/07 10:54:45.134 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.131 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.134 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.131 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/07 10:54:45.144 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.131 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.154 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=964.208µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.156 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.156 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/07 10:54:45.157 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.035375ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.131 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.165 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.131 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.173 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/07 10:54:45.173 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.173 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/07 10:54:45.179 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.176 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.179 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.176 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/07 10:54:45.188 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.176 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.197 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=791.666µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.199 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.199 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/07 10:54:45.200 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.033125ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.176 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.208 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.176 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.214 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/07 10:54:45.214 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.216 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/07 10:54:45.227 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.227 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/07 10:54:45.239 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.264 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.970916ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.266 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.266 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/07 10:54:45.266 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.013666ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.283 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.219 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.297 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/07 10:54:45.297 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.298 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/07 10:54:45.305 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.301 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.305 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.301 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/07 10:54:45.316 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.301 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.329 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.4435ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.331 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.331 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/07 10:54:45.331 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.136625ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.301 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.340 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.301 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.349 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/07 10:54:45.349 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.350 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/07 10:54:45.357 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.357 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/07 10:54:45.368 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.381 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.303209ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.384 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.384 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/07 10:54:45.384 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.017375ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.398 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.411 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/07 10:54:45.412 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.425 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/07 10:54:45.442 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.431 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.442 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.431 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/07 10:54:45.453 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.431 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.461 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=715.125µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.464 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.464 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/07 10:54:45.464 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.063417ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.431 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.480 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.431 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.486 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/07 10:54:45.486 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.487 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/07 10:54:45.493 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.489 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.493 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.489 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/07 10:54:45.503 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.489 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.513 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=934.292µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.515 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.515 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/07 10:54:45.516 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.154458ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.489 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.531 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.489 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.537 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/07 10:54:45.538 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.539 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/07 10:54:45.545 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.541 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.545 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.541 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/07 10:54:45.555 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.541 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.567 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=1.083208ms] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.569 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.569 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/07 10:54:45.569 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.022208ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.541 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.581 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.541 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.588 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/07 10:54:45.588 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.589 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/07 10:54:45.596 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.596 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/07 10:54:45.606 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.616 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=1.088834ms] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.618 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.619 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/07 10:54:45.619 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.07375ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.631 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.638 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/07 10:54:45.638 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.640 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:45.640 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/07 10:54:45.648 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.648 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:45.659 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.676 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.881083ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.678 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.678 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/07 10:54:45.680 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=6.126167ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.690 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.700 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/07 10:54:45.701 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.702 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/07 10:54:45.709 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.709 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/07 10:54:45.718 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.732 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.55525ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.734 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.734 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/07 10:54:45.734 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.021666ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.743 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.752 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/07 10:54:45.752 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.753 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:45.759 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.759 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:45.768 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.779 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=1.091459ms] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.781 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.781 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/07 10:54:45.782 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.161917ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.790 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.797 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/07 10:54:45.797 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.798 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:45.804 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.8 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.804 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.8 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:45.817 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.8 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.827 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=1.039959ms] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.829 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.829 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/07 10:54:45.830 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.037958ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.8 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.838 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.8 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.845 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/07 10:54:45.845 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.846 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:45.853 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.853 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:45.864 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.874 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=960.083µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.879 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.879 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/07 10:54:45.881 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=8.079875ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.889 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.85 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.896 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/07 10:54:45.896 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.897 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/07 10:54:45.903 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.899 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.903 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.899 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/07 10:54:45.913 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.899 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.924 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=1.113792ms] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.926 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.926 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/07 10:54:45.927 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.066583ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.899 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.935 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.899 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.942 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/07 10:54:45.942 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.943 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/07 10:54:45.949 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.945 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:45.949 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.945 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/07 10:54:45.959 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.945 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.967 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:45.968 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:45.970 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=1.015166ms] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/07 10:54:45.972 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:45.972 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/07 10:54:45.974 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=6.183833ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.945 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.982 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.945 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:45.989 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/07 10:54:45.989 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:45.990 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:46.000 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.994 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.000 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.994 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:46.010 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.994 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.026 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.829291ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.028 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.028 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/07 10:54:46.030 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=6.018542ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:45.994 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.041 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:45.994 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.051 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/07 10:54:46.051 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.055 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:46.061 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.057 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.061 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.057 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:46.071 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.057 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.082 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=1.057584ms] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.084 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.084 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/07 10:54:46.085 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.045708ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.057 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.093 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.057 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.102 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/07 10:54:46.102 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.103 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/07 10:54:46.109 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.105 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.109 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.105 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/07 10:54:46.119 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.105 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.127 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=738.583µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.131 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.131 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/07 10:54:46.132 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=6.020625ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.105 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.140 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.105 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.146 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/07 10:54:46.146 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.147 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/07 10:54:46.152 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.149 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.152 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.149 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/07 10:54:46.162 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.149 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.169 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=552.375µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.171 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.171 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/07 10:54:46.172 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.029084ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.149 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.180 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.149 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.186 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/07 10:54:46.186 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.187 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/07 10:54:46.196 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.191 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/07 10:54:46.196 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.191 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.207 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.191 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.220 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.54275ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.222 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.223 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/07 10:54:46.223 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.039959ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.191 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.231 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.191 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.240 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/07 10:54:46.240 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.241 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/07 10:54:46.248 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.245 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.248 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.245 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/07 10:54:46.258 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.245 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.268 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=1.0385ms] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.270 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.270 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/07 10:54:46.270 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.02075ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.245 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.278 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.245 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.285 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/07 10:54:46.285 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.286 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:46.292 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.292 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:46.302 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.311 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=942.583µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.313 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.313 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/07 10:54:46.314 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.018916ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.322 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.329 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/07 10:54:46.329 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.330 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/07 10:54:46.336 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.333 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.336 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.333 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/07 10:54:46.346 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.333 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.356 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=940.166µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.358 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.358 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/07 10:54:46.358 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.033917ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.333 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.367 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.333 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.373 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/07 10:54:46.373 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.374 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/07 10:54:46.382 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.378 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.382 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.378 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/07 10:54:46.392 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.378 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.400 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=820.125µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.403 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.403 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/07 10:54:46.403 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.137584ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.378 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.411 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.378 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.418 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/07 10:54:46.419 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.420 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:46.426 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.426 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:46.437 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.446 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=918.458µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.448 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.448 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/07 10:54:46.449 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.118416ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.457 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.464 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/07 10:54:46.464 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.465 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/07 10:54:46.471 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.467 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.471 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.467 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/07 10:54:46.481 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.467 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.491 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=866.208µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.493 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.493 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/07 10:54:46.494 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.160416ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.467 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.501 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.467 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.508 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/07 10:54:46.508 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.509 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:46.509 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/07 10:54:46.515 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.515 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:46.525 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.537 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=1.175291ms] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.539 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.539 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/07 10:54:46.539 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.112375ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.550 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.557 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/07 10:54:46.557 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.558 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:46.565 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.561 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.565 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.561 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:46.574 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.561 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.586 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.271875ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.588 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.588 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/07 10:54:46.589 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.067583ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.561 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.597 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.561 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.605 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/07 10:54:46.606 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.607 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:46.613 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.613 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:46.623 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.637 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.397667ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.639 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.639 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/07 10:54:46.640 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.16375ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.648 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.656 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/07 10:54:46.656 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.658 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/07 10:54:46.666 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.666 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/07 10:54:46.676 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.693 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.929083ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.695 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.695 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/07 10:54:46.697 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=6.042375ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.710 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.720 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/07 10:54:46.720 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.721 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/07 10:54:46.726 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.726 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/07 10:54:46.736 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.743 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=599.167µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.745 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.745 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/07 10:54:46.746 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.018042ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.753 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.758 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/07 10:54:46.758 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.767 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:46.762 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.767 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:46.762 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/07 10:54:46.776 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.762 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.790 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=1.297458ms] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/07 10:54:46.792 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.792 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/07 10:54:46.793 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.107583ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:46.762 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.802 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.762 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.811 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/07 10:54:46.811 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.812 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/07 10:54:46.819 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.814 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.819 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.814 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/07 10:54:46.828 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.814 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.840 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=1.243542ms] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.842 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.842 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/07 10:54:46.842 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.034125ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.814 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.851 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.814 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.859 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/07 10:54:46.859 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.860 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/07 10:54:46.865 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.862 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.865 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.862 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/07 10:54:46.876 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.862 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.885 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=823.917µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.887 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.887 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/07 10:54:46.888 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.025167ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.862 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.895 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.862 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.902 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/07 10:54:46.902 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.903 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/07 10:54:46.909 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.905 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.909 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.905 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/07 10:54:46.920 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.905 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.929 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=828.166µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.932 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.932 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/07 10:54:46.932 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.045042ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.905 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.940 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.905 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.946 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/07 10:54:46.946 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:46.948 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/07 10:54:46.958 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:46.958 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/07 10:54:46.966 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:46.966 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:46.967 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:46.969 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:46.989 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=2.2015ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/07 10:54:46.991 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:46.991 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/07 10:54:46.993 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=6.043ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:46.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.003 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:46.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.015 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/07 10:54:47.015 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.016 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/07 10:54:47.025 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.019 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.025 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.019 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/07 10:54:47.040 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.019 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.057 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.971458ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.060 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.060 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/07 10:54:47.061 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.102959ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.019 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.071 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.019 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.081 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/07 10:54:47.082 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.083 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/07 10:54:47.092 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.092 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/07 10:54:47.102 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.122 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=2.344417ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.124 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.124 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/07 10:54:47.125 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=6.1225ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.136 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.147 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/07 10:54:47.148 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.149 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/07 10:54:47.157 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.151 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.157 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.151 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/07 10:54:47.168 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.151 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.184 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.800125ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.186 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.186 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/07 10:54:47.188 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=6.057875ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.151 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.197 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.151 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.207 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/07 10:54:47.207 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.208 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/07 10:54:47.217 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.21 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.217 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.21 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/07 10:54:47.226 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.21 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.245 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=2.107041ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.247 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.247 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/07 10:54:47.248 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=6.029ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.21 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.266 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.21 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.280 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/07 10:54:47.280 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.288 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/07 10:54:47.299 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.292 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.299 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.292 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/07 10:54:47.311 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.292 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.331 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=2.1985ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.333 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.333 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/07 10:54:47.335 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=6.041875ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.292 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.345 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.292 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.358 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/07 10:54:47.358 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.359 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:47.368 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.368 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:47.387 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.401 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.488542ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.403 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.403 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/07 10:54:47.405 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=6.083375ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.414 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.425 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/07 10:54:47.425 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.427 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:47.435 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.435 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:47.447 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.459 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.304875ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.461 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.461 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/07 10:54:47.461 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.136375ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.470 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.479 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/07 10:54:47.479 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.480 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/07 10:54:47.492 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.484 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.492 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.484 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/07 10:54:47.503 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.484 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.526 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.625625ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.528 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.528 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/07 10:54:47.529 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=6.090292ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.484 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.540 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.484 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.553 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/07 10:54:47.553 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.554 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:47.561 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:47.561 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:47.571 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.587 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.480959ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/07 10:54:47.589 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:47.589 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/07 10:54:47.589 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.105916ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:47.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.598 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:47.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:47.607 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/07 10:54:47.607 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:47.712 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=2.7453565s]
[2023/08/07 10:54:47.966 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=78715843-59e9-4dfe-933d-b041e18c11ea] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:47.966 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:47.966 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 11, tp add index"] [category=ddl] ["take time"=13.125µs]
[2023/08/07 10:54:47.966 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 12, tp add index"] [category=ddl] ["take time"=39.5µs]
[2023/08/07 10:54:47.966 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:47.966 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 10, tp general"] [category=ddl] ["take time"=3.417µs]
[2023/08/07 10:54:47.966 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:47.966 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:47.973 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=78715843-59e9-4dfe-933d-b041e18c11ea] ["take time"=261.503209ms]
[2023/08/07 10:54:47.973 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=78715843-59e9-4dfe-933d-b041e18c11ea]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:47.974 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:47.974 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=261.897083ms]
[2023/08/07 10:54:47.974 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=826fcf26-2069-47d6-b77c-4981916315b4] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:47.974 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:47.974 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:48.055 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=64.790584ms]
[2023/08/07 10:54:48.056 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:48.056 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e] [runWorker=true]
[2023/08/07 10:54:48.058 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:48.058 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:48.058 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:48.058 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:48.058 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:48.058 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:48.058 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:48.058 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:48.058 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:48.059 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:48.059 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:48.059 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:48.059 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:48.059 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:48.059 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:48.060 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:48.064 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:48.064 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:48.064 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:54:48.087 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:48.094 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:48.097 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:48.097 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:54:48.098 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:48.098 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:48.099 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:48.099 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:48.099 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:54:48.100 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:48.100 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:48.100 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=826fcf26-2069-47d6-b77c-4981916315b4] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:48.100 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:48.100 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:48.104 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:48.180 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=62.601292ms]
[2023/08/07 10:54:48.181 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:48.181 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0] [runWorker=true]
[2023/08/07 10:54:48.181 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:48.181 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:48.181 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:48.181 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:48.181 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:48.181 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:48.187 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:48.187 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:48.187 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:54:48.206 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:48.212 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:48.215 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:48.215 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:54:48.215 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:48.215 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:48.216 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:48.217 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:48.217 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[35b4c062-130a-4c94-9549-54b35508e10e,0251653e-476d-4f8b-bd1f-89886edbd7e0]"]
[2023/08/07 10:54:48.217 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:54:48.217 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:48.217 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:48.231 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:48.231 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:49.217 +08:00] [INFO] [dispatcher_manager.go:128] ["dispatch task loop start"]
[2023/08/07 10:54:49.217 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/07 10:54:49.217 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/07 10:54:49.523 +08:00] [INFO] [dispatcher.go:84] ["execute one task"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8]
[2023/08/07 10:54:50.024 +08:00] [INFO] [dispatcher.go:174] ["handle pending state"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [stage=-1]
[2023/08/07 10:54:50.024 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/07 10:54:50.058 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:50.181 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:50.205 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:54:50.205 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/07 10:54:50.322 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:54:50.322 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/07 10:54:50.509 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:54:50.513 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/07 10:54:50.513 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.513 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.513 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.518 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/07 10:54:50.519 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.519 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.519 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.524 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:54:50.626 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4001, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:54:50.631 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4001, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/07 10:54:50.631 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.631 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:50.631 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:54:51.023 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:54:51.028 +08:00] [INFO] [dispatcher.go:198] ["previous stage finished, generate dist plan"] [dispatcher="task_id: 1, task_type: Example"] [stage=1]
[2023/08/07 10:54:51.028 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [concurrency=8] [subtasks=1]
[2023/08/07 10:54:51.129 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=2] [concurrency=8]
[2023/08/07 10:54:51.133 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=4]
[2023/08/07 10:54:51.133 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:54:51.133 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:54:51.133 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:54:51.523 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=2]
[2023/08/07 10:54:51.528 +08:00] [INFO] [dispatcher.go:198] ["previous stage finished, generate dist plan"] [dispatcher="task_id: 1, task_type: Example"] [stage=2]
[2023/08/07 10:54:51.528 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [concurrency=8] [subtasks=0]
[2023/08/07 10:54:51.542 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=succeed]
[2023/08/07 10:54:51.741 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=succeed]
[2023/08/07 10:54:52.024 +08:00] [INFO] [dispatcher.go:130] ["schedule task, task is finished"] [dispatcher="task_id: 1, task_type: Example"] [state=succeed]
[2023/08/07 10:54:52.225 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=48] [cur_db=test] [sql="drop table if exists t"] [user=]
[2023/08/07 10:54:52.226 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=48] [cur_db=test] [sql="create table t(a int not null, b int not null)"] [user=]
[2023/08/07 10:54:52.234 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:52.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:52.234 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:52.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table t(a int not null, b int not null)"]
[2023/08/07 10:54:52.246 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 16, tp general"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:52.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:52.254 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=602.458µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/08/07 10:54:52.257 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=99] [version=49]
[2023/08/07 10:54:52.257 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=4.064417ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:52.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:52.267 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 16, tp general"] [category=ddl] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:98, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:52.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:52.277 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=99]
[2023/08/07 10:54:52.277 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:52.280 +08:00] [INFO] [region_request.go:1365] ["send request failed, err: context canceled"] [req-ts=443384304049586177] [req-type=Cop] [region="{ region id: 2, ver: 1, confVer: 1 }"] [region-is-valid=true] [retry-times=0] [replica-read-type=leader] [replica-selector-state=accessKnownLeader] [stale-read=false] [replica-status="peer: 3, store: 1, isEpochStale: false, attempts: 1, replica-epoch: 0, store-epoch: 0, store-state: resolved, store-liveness-state: reachable"] [total-backoff-ms=0] [total-backoff-times=0] [total-region-errors=]
[2023/08/07 10:54:52.309 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=621.833µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/08/07 10:54:53.060 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:53.060 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:53.060 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 14, tp add index"] [category=ddl] ["take time"=12.708µs]
[2023/08/07 10:54:53.060 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 15, tp add index"] [category=ddl] ["take time"=13.625µs]
[2023/08/07 10:54:53.060 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:53.060 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 13, tp general"] [category=ddl] ["take time"=7.292µs]
[2023/08/07 10:54:53.060 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:53.060 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:53.061 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e] ["take time"=780.244125ms]
[2023/08/07 10:54:53.061 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e]
[2023/08/07 10:54:53.061 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:53.061 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:53.061 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.061 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:54:53.062 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:53.062 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:54:53.062 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:53.062 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:53.062 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:53.062 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:53.063 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:53.064 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:54:53.064 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:54:53.064 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:53.103 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=35b4c062-130a-4c94-9549-54b35508e10e] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:54:53.103 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:53.103 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=822.458ms]
[2023/08/07 10:54:53.217 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=0251653e-476d-4f8b-bd1f-89886edbd7e0]
[2023/08/07 10:54:53.217 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/07 10:54:53.217 +08:00] [INFO] [dispatcher_manager.go:134] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/07 10:54:53.217 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=0251653e-476d-4f8b-bd1f-89886edbd7e0]
[2023/08/07 10:54:53.218 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:53.218 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:53.218 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 17, tp add index"] [category=ddl] ["take time"=13.209µs]
[2023/08/07 10:54:53.218 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 18, tp add index"] [category=ddl] ["take time"=9.25µs]
[2023/08/07 10:54:53.218 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:53.218 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 16, tp general"] [category=ddl] ["take time"=2.959µs]
[2023/08/07 10:54:53.218 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:53.218 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:53.219 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0] ["take time"=938.230125ms]
[2023/08/07 10:54:53.219 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0]
[2023/08/07 10:54:53.219 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:53.219 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:54:53.219 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.219 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:54:53.220 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:54:53.220 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:53.220 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:53.221 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:54.188 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:54:54.188 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:54:54.188 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:54.216 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0251653e-476d-4f8b-bd1f-89886edbd7e0] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:54:54.216 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:54.216 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.935866541s]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/07 10:54:54.237 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkWithQuery (9.42s)
=== RUN   TestFrameworkSubTaskFailed
[2023/08/07 10:54:54.327 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/07 10:54:54.328 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:54.328 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:54.330 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:54.330 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:54.331 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:54:54.335 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=25ab211b-2810-409a-921f-3de5670ba0fc] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:54.335 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:54.335 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:54.352 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkSubTaskFailed\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:290\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/07 10:54:54.363 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=10.886125ms]
[2023/08/07 10:54:54.364 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:54.364 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=b457eced-f312-4a3f-b123-f6d148a19b9a] [runWorker=true]
[2023/08/07 10:54:54.364 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:54.364 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:54.364 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:54.364 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:54.364 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:54.364 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:54.365 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:54.365 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:54.366 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/07 10:54:54.370 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:54.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.370 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:54.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/07 10:54:54.381 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.395 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=9.243792ms]
[2023/08/07 10:54:54.395 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:54.398 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.398 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/07 10:54:54.399 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=14.0905ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:54:54.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.411 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.416 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/07 10:54:54.416 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.417 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/07 10:54:54.419 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/07 10:54:54.437 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.437 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/07 10:54:54.450 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.496 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=5.426667ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.498 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.499 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/07 10:54:54.501 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=10.026417ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.517 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.542 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/07 10:54:54.542 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.543 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/07 10:54:54.549 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.545 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.549 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.545 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/07 10:54:54.559 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.545 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.569 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=975.209µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.571 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.571 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/07 10:54:54.572 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.0265ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.545 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.580 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.545 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.588 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/07 10:54:54.588 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.588 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/07 10:54:54.594 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.594 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/07 10:54:54.605 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.614 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=819.959µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.616 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.616 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/07 10:54:54.616 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.033167ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.629 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.635 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/07 10:54:54.635 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.637 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/07 10:54:54.650 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.650 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/07 10:54:54.661 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.689 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=5.869541ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.691 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.691 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/07 10:54:54.693 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=10.080167ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.704 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.721 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/07 10:54:54.722 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.723 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/07 10:54:54.730 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.730 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/07 10:54:54.740 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.754 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.445375ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.756 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.756 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/07 10:54:54.756 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.032958ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.766 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.777 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/07 10:54:54.777 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.778 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/07 10:54:54.785 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.785 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/07 10:54:54.798 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.811 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.38375ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.813 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.813 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/07 10:54:54.813 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.059333ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.834 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.843 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/07 10:54:54.843 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.844 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/07 10:54:54.849 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.849 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/07 10:54:54.862 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.870 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=699µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.872 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.872 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/07 10:54:54.873 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.094875ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.883 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.889 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/07 10:54:54.889 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.890 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/07 10:54:54.896 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.896 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/07 10:54:54.912 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.921 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=890.959µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.923 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.923 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/07 10:54:54.924 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.020541ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.932 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.893 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.938 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/07 10:54:54.938 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.939 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/07 10:54:54.952 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:54.952 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/07 10:54:54.963 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.974 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=1.108792ms] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/07 10:54:54.976 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:54.976 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/07 10:54:54.977 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.081125ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.985 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:54.995 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/07 10:54:54.995 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:54.996 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/07 10:54:55.002 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.002 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/07 10:54:55.015 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.026 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=1.106ms] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.028 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.028 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/07 10:54:55.028 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.024ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:54.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.037 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:54.998 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.044 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/07 10:54:55.045 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.048 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:55.048 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/07 10:54:55.057 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.051 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.057 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.051 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:55.071 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.051 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.087 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.852208ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.089 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.089 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/07 10:54:55.091 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=6.027209ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.051 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.104 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.051 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.115 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/07 10:54:55.115 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.116 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/07 10:54:55.124 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.119 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.124 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.119 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/07 10:54:55.140 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.119 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.154 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.538292ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.156 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.156 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/07 10:54:55.158 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=6.016125ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.119 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.169 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.119 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.178 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/07 10:54:55.178 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.179 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:55.186 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.186 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:55.196 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.208 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=1.106667ms] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.210 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.210 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/07 10:54:55.210 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.010667ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.218 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.228 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/07 10:54:55.228 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.229 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:54:55.235 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.231 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.235 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.231 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/07 10:54:55.245 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.231 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.256 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=1.112ms] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.258 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.258 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/07 10:54:55.259 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.022791ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.231 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.267 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.231 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.275 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/07 10:54:55.275 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.276 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:55.282 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.282 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:55.294 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.304 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=956.042µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.306 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.306 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/07 10:54:55.307 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=4.024708ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.315 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.322 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/07 10:54:55.322 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.323 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/07 10:54:55.331 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.327 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.331 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.327 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/07 10:54:55.342 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.327 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.352 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=1.115125ms] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.355 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.355 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/07 10:54:55.355 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.089458ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.327 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.365 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.327 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.365 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:55.365 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:55.374 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/07 10:54:55.374 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.376 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/07 10:54:55.383 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.383 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/07 10:54:55.396 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.406 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=967.291µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.408 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.408 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/07 10:54:55.409 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.065291ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.417 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.424 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/07 10:54:55.425 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.426 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:55.435 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.435 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:55.445 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.464 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.745ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.466 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.466 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/07 10:54:55.468 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=6.019375ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.480 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.491 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/07 10:54:55.491 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.494 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:55.500 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.500 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:55.512 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.523 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=1.093125ms] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.526 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.526 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/07 10:54:55.527 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=6.043791ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.536 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.545 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/07 10:54:55.545 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.546 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/07 10:54:55.552 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.548 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.552 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.548 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/07 10:54:55.562 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.548 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.570 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=722.75µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.572 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.572 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/07 10:54:55.573 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.022875ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.548 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.582 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.548 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.588 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/07 10:54:55.588 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.589 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/07 10:54:55.594 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.594 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/07 10:54:55.607 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.614 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=559.666µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.616 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.616 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/07 10:54:55.617 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.096666ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.629 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.591 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.634 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/07 10:54:55.634 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.635 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/07 10:54:55.642 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.642 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/07 10:54:55.652 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.666 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.551542ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.668 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.668 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/07 10:54:55.669 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.017458ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.677 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.688 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/07 10:54:55.688 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.689 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/07 10:54:55.695 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.695 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/07 10:54:55.706 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.720 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=1.077333ms] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.722 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.722 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/07 10:54:55.722 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.04375ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.731 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.738 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/07 10:54:55.738 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.739 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:54:55.745 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.741 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.745 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.741 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:54:55.756 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.741 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.767 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=936.042µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.769 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.769 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/07 10:54:55.769 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.029625ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.741 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.778 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.741 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.787 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/07 10:54:55.787 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.788 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/07 10:54:55.795 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.79 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.795 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.79 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/07 10:54:55.806 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.79 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.819 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=1.048584ms] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.821 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.821 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/07 10:54:55.822 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.071ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.79 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.834 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.79 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.842 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/07 10:54:55.842 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.843 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/07 10:54:55.851 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.851 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/07 10:54:55.861 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.871 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=814.458µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.873 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.873 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/07 10:54:55.874 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.414209ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.887 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.846 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.894 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/07 10:54:55.894 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.895 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:55.906 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.897 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.906 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.897 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:55.923 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.897 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.939 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=940.959µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.942 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.942 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/07 10:54:55.942 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.043625ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.897 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.953 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.897 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.960 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/07 10:54:55.960 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:55.961 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/07 10:54:55.967 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.964 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:55.967 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.964 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/07 10:54:55.982 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.964 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:55.995 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=825.25µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/07 10:54:55.997 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:55.997 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/07 10:54:55.998 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.052125ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:55.964 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.009 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:55.964 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.016 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/07 10:54:56.016 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.018 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:54:56.019 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/07 10:54:56.026 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.022 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.026 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.022 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/07 10:54:56.039 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.022 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.051 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=1.151084ms] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.054 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.054 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/07 10:54:56.054 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.038625ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.022 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.064 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.022 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.073 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/07 10:54:56.073 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.074 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:56.082 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.077 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.082 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.077 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:56.095 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.077 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.115 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.299042ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.118 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.118 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/07 10:54:56.120 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=6.091708ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.077 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.132 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.077 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.142 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/07 10:54:56.142 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.143 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:54:56.152 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.146 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.152 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.146 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:54:56.165 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.146 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.179 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.341583ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.183 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.183 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/07 10:54:56.183 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=6.092ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.146 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.192 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.146 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.202 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/07 10:54:56.202 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.204 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/07 10:54:56.218 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.218 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/07 10:54:56.231 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.254 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=2.83725ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.257 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.257 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/07 10:54:56.257 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=6.152208ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.269 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.288 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/07 10:54:56.288 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.289 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/07 10:54:56.303 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.295 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.303 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.295 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/07 10:54:56.326 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.295 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.333 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=613.708µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.335 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.335 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/07 10:54:56.337 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.041708ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.295 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.364 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:54:56.367 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:56.367 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:56.369 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.295 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.377 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/07 10:54:56.377 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.400 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:56.391 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.400 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:56.391 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/07 10:54:56.421 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.391 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.439 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=1.293166ms] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/07 10:54:56.442 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.442 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/07 10:54:56.443 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=6.108625ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:54:56.391 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.454 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.391 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.474 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/07 10:54:56.474 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.476 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/07 10:54:56.487 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.48 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.487 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.48 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/07 10:54:56.508 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.48 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.521 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=1.217625ms] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.523 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.523 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/07 10:54:56.525 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=6.095083ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.48 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.554 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.48 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.566 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/07 10:54:56.566 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.568 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/07 10:54:56.577 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.577 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/07 10:54:56.600 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.614 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=1.827291ms] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.619 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.619 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/07 10:54:56.620 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=8.061625ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.665 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.675 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/07 10:54:56.675 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.677 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/07 10:54:56.692 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.68 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.692 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.68 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/07 10:54:56.715 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.68 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.728 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=837.875µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.731 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.731 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/07 10:54:56.731 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.12025ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.68 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.766 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.68 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.805 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/07 10:54:56.805 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.806 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/07 10:54:56.832 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.812 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.832 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.812 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/07 10:54:56.842 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.812 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.866 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=3.297916ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/07 10:54:56.870 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:56.870 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/07 10:54:56.870 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=8.074916ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.812 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.923 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.812 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:56.940 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/07 10:54:56.940 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:56.941 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/07 10:54:56.951 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.944 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:56.951 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.944 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/07 10:54:56.968 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.944 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.004 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=3.054125ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.009 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.009 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/07 10:54:57.009 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=8.1715ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:56.944 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.020 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:56.944 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.049 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/07 10:54:57.049 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.051 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/07 10:54:57.062 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.062 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/07 10:54:57.078 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.127 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=11.177333ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.129 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.129 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/07 10:54:57.131 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=18.1085ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.153 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.186 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/07 10:54:57.186 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.187 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/07 10:54:57.203 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.197 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.203 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.197 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/07 10:54:57.232 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.197 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.266 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.750542ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.269 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.269 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/07 10:54:57.272 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=8.042834ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.197 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.289 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.197 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.305 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/07 10:54:57.305 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.307 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/07 10:54:57.321 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.321 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/07 10:54:57.364 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.371 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:54:57.371 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:54:57.417 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=9.040666ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.419 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.419 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/07 10:54:57.421 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=13.435084ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.446 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.460 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/07 10:54:57.460 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.461 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/07 10:54:57.475 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.465 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.475 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.465 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/07 10:54:57.506 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.465 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.527 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=2.158916ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.534 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.534 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/07 10:54:57.535 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=10.779791ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.465 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.559 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.465 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.585 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/07 10:54:57.585 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.587 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:57.630 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.630 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:57.648 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.662 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.450167ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.665 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.665 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/07 10:54:57.669 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=8.0335ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.703 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.713 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/07 10:54:57.713 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.714 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:57.724 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.718 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.724 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.718 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:57.738 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.718 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.758 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.328542ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.760 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.760 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/07 10:54:57.763 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=6.802292ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.718 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.786 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.718 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.796 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/07 10:54:57.796 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.800 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/07 10:54:57.812 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.803 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.812 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.803 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/07 10:54:57.855 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.803 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.884 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.817667ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.887 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.887 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/07 10:54:57.889 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=8.169166ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.803 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.919 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.803 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.941 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/07 10:54:57.941 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:57.942 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:54:57.953 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.947 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:54:57.953 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.947 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:54:57.975 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.947 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:57.996 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=2.848375ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/07 10:54:57.999 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:54:57.999 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/07 10:54:57.999 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=6.233375ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:54:57.947 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:58.031 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:54:57.947 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:54:58.054 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/07 10:54:58.054 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:54:58.202 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=3.837535708s]
[2023/08/07 10:54:58.365 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=b457eced-f312-4a3f-b123-f6d148a19b9a] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:54:58.366 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:58.366 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 21, tp add index"] [category=ddl] ["take time"=17.125µs]
[2023/08/07 10:54:58.366 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 20, tp add index"] [category=ddl] ["take time"=15.25µs]
[2023/08/07 10:54:58.366 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:54:58.366 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 19, tp general"] [category=ddl] ["take time"=2.5µs]
[2023/08/07 10:54:58.366 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:54:58.366 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:54:58.389 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=b457eced-f312-4a3f-b123-f6d148a19b9a] ["take time"=185.888458ms]
[2023/08/07 10:54:58.389 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=b457eced-f312-4a3f-b123-f6d148a19b9a]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:58.389 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:54:58.389 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:58.390 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=186.7655ms]
[2023/08/07 10:54:58.390 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=25ab211b-2810-409a-921f-3de5670ba0fc] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:54:58.390 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:54:58.390 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:54:58.491 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=82.137292ms]
[2023/08/07 10:54:58.492 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:54:58.492 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93] [runWorker=true]
[2023/08/07 10:54:58.493 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:54:58.493 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:54:58.493 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:54:58.493 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:54:58.493 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:54:58.493 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:54:58.493 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:54:58.494 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:54:58.500 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:54:58.500 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:54:58.501 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:54:58.538 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:54:58.547 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:54:58.552 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:54:58.552 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:54:58.552 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:54:58.552 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:54:58.554 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:58.554 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:54:58.554 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:54:58.556 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:54:58.556 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[888cb980-3782-466e-b2d7-026ef7a18b93]"]
[2023/08/07 10:54:58.558 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:54:59.555 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/07 10:54:59.555 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/07 10:54:59.558 +08:00] [INFO] [dispatcher_manager.go:128] ["dispatch task loop start"]
[2023/08/07 10:54:59.863 +08:00] [INFO] [dispatcher.go:84] ["execute one task"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8]
[2023/08/07 10:55:00.365 +08:00] [INFO] [dispatcher.go:174] ["handle pending state"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [stage=-1]
[2023/08/07 10:55:00.365 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/07 10:55:00.495 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:55:00.669 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:55:00.670 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/07 10:55:00.864 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:55:00.976 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:55:00.980 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/07 10:55:00.981 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:00.981 +08:00] [ERROR] [scheduler.go:358] ["scheduler error"] [scheduler="id: :4000, task_id: 1"] [error=MockExecutorRunErr] [errorVerbose="MockExecutorRunErr\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:247\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:187\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:358\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:247\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:187\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145"]
[2023/08/07 10:55:00.981 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:00.981 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:00.985 +08:00] [ERROR] [manager.go:299] ["failed to handle task"] [dist_task_manager=:4000] [error=MockExecutorRunErr] [errorVerbose="MockExecutorRunErr\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:247\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:187\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/disttask/framework/scheduler.(*Manager).onRunnableTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/manager.go:299\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*Manager).onRunnableTasks.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/manager.go:204\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145"]
[2023/08/07 10:55:01.289 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:55:01.293 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/07 10:55:01.293 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.293 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.293 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.299 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/07 10:55:01.299 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.299 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.299 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:01.364 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:55:01.367 +08:00] [WARN] [dispatcher.go:186] ["subtasks encounter errors"] [dispatcher="task_id: 1, task_type: Example"]
[2023/08/07 10:55:01.561 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:55:01.607 +08:00] [INFO] [scheduler.go:275] ["scheduler rollback a step"] [scheduler="id: :4000, task_id: 1"] [step=1]
[2023/08/07 10:55:01.861 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:55:01.864 +08:00] [INFO] [dispatcher.go:155] ["handle reverting state"] [dispatcher="task_id: 1, task_type: Example"] [state=reverting] [stage=1]
[2023/08/07 10:55:01.867 +08:00] [INFO] [dispatcher.go:164] ["update the task to reverted state"] [dispatcher="task_id: 1, task_type: Example"]
[2023/08/07 10:55:01.915 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=reverted]
[2023/08/07 10:55:02.364 +08:00] [INFO] [dispatcher.go:130] ["schedule task, task is finished"] [dispatcher="task_id: 1, task_type: Example"] [state=reverted]
[2023/08/07 10:55:03.554 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/07 10:55:03.558 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=888cb980-3782-466e-b2d7-026ef7a18b93]
[2023/08/07 10:55:03.558 +08:00] [INFO] [dispatcher_manager.go:134] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/07 10:55:03.558 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=888cb980-3782-466e-b2d7-026ef7a18b93]
[2023/08/07 10:55:03.563 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:55:03.563 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:03.563 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 24, tp add index"] [category=ddl] ["take time"=20µs]
[2023/08/07 10:55:03.563 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 23, tp add index"] [category=ddl] ["take time"=26.958µs]
[2023/08/07 10:55:03.563 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:03.563 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 22, tp general"] [category=ddl] ["take time"=10.167µs]
[2023/08/07 10:55:03.563 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:55:03.564 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:55:03.564 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93] ["take time"=984.507375ms]
[2023/08/07 10:55:03.564 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93]
[2023/08/07 10:55:03.564 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:03.564 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:03.564 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:03.564 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:55:03.566 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:55:03.566 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:03.566 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:55:03.566 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:03.566 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:55:03.566 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:04.501 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:55:04.501 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:55:04.501 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:04.554 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=888cb980-3782-466e-b2d7-026ef7a18b93] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:55:04.555 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:04.555 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.975410167s]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/07 10:55:04.580 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkSubTaskFailed (10.35s)
=== RUN   TestOwnerChange
[2023/08/07 10:55:04.774 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/07 10:55:04.775 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:55:04.775 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:55:04.777 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:55:04.777 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:55:04.779 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/07 10:55:04.786 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=dfba2444-69ad-4436-8ec2-826110d5e761] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:55:04.787 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:55:04.787 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:55:04.814 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestOwnerChange\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:321\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/07 10:55:04.830 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=15.2015ms]
[2023/08/07 10:55:04.831 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:55:04.831 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=701e05ef-ada5-43c5-ace7-bab36eae6382] [runWorker=true]
[2023/08/07 10:55:04.831 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:55:04.831 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:55:04.831 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:04.831 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:04.831 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:04.831 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:04.831 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:55:04.836 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:55:04.837 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/07 10:55:04.843 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:55:04.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/07 10:55:04.843 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:55:04.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:04.861 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:04.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:04.878 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=12.850083ms]
[2023/08/07 10:55:04.879 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:55:04.882 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:04.882 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/07 10:55:04.883 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=18.054584ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-07 10:55:04.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:04.901 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:04.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:04.909 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/07 10:55:04.909 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:04.909 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/07 10:55:04.912 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/07 10:55:04.936 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:04.915 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:04.936 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:04.915 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/07 10:55:04.955 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:04.915 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.007 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=6.237334ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.010 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.010 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/07 10:55:05.011 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=10.066084ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:04.915 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.031 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:04.915 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.062 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/07 10:55:05.062 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.063 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/07 10:55:05.071 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.067 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.071 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.067 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/07 10:55:05.089 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.067 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.102 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=1.554708ms] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.104 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.104 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/07 10:55:05.106 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=6.034708ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.067 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.119 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.067 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.126 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/07 10:55:05.127 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.127 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/07 10:55:05.134 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.13 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.134 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.13 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/07 10:55:05.153 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.13 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.162 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=864.125µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.165 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.165 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/07 10:55:05.167 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=6.044708ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.13 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.176 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.13 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.184 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/07 10:55:05.184 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.186 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/07 10:55:05.198 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.198 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/07 10:55:05.210 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.236 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.919791ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.238 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.238 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/07 10:55:05.239 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.045ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.251 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.268 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/07 10:55:05.268 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.269 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/07 10:55:05.280 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.272 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.280 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.272 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/07 10:55:05.292 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.272 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.307 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.507667ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.310 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.310 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/07 10:55:05.312 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=6.055125ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.272 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.330 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.272 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.339 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/07 10:55:05.339 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.340 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/07 10:55:05.347 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.347 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/07 10:55:05.362 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.374 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.386542ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.377 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.377 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/07 10:55:05.379 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=6.059ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.389 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.401 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/07 10:55:05.401 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.402 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/07 10:55:05.409 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.409 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/07 10:55:05.422 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.432 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=832.5µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.434 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.434 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/07 10:55:05.434 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.018375ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.448 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.458 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/07 10:55:05.458 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.459 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/07 10:55:05.465 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.465 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/07 10:55:05.480 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.489 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=886.083µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.491 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.491 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/07 10:55:05.492 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.036667ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.500 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.510 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/07 10:55:05.510 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.511 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/07 10:55:05.518 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.514 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.518 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.514 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/07 10:55:05.529 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.514 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.542 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=1.157292ms] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.545 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.545 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/07 10:55:05.546 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=6.042708ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.514 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.559 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.514 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.567 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/07 10:55:05.567 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.568 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/07 10:55:05.574 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.57 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.574 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.57 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/07 10:55:05.589 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.57 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.600 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=1.17725ms] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.603 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.603 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/07 10:55:05.603 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.06325ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.57 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.615 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.57 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.624 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/07 10:55:05.624 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.627 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:55:05.627 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/07 10:55:05.637 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.631 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.637 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.631 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:55:05.651 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.631 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.668 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=2.048583ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.671 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.671 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/07 10:55:05.672 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=6.0355ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.631 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.684 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.631 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.697 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/07 10:55:05.697 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.699 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/07 10:55:05.707 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.702 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.707 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.702 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/07 10:55:05.728 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.702 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.742 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.490125ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.744 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.744 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/07 10:55:05.744 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.054875ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.702 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.754 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.702 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.766 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/07 10:55:05.766 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.767 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:55:05.773 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.769 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.773 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.769 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/07 10:55:05.789 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.769 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.799 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=1.04225ms] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.801 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.801 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/07 10:55:05.802 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.024125ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.769 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.812 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.769 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.820 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/07 10:55:05.820 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.821 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/07 10:55:05.828 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.823 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.828 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.823 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/07 10:55:05.832 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:55:05.832 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:55:05.841 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.823 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.852 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=1.103333ms] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.854 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.854 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/07 10:55:05.854 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.025709ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.823 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.863 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.823 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.870 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/07 10:55:05.870 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.871 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:55:05.881 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.873 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.881 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.873 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:55:05.891 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.873 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.900 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=972.709µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.903 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.903 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/07 10:55:05.903 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=4.038542ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.873 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.912 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.873 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.919 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/07 10:55:05.920 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.921 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/07 10:55:05.930 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.926 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.930 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.926 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/07 10:55:05.942 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.926 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.953 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=1.098667ms] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/07 10:55:05.956 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:05.956 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/07 10:55:05.956 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.016833ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.926 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.968 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.926 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:05.976 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/07 10:55:05.976 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:05.979 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/07 10:55:05.987 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.983 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:05.987 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.983 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/07 10:55:05.998 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.983 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.008 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=1.075167ms] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.010 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.010 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/07 10:55:06.011 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.048083ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:05.983 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.020 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:05.983 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.029 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/07 10:55:06.029 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.031 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:55:06.041 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.041 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:55:06.053 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.069 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.769667ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.071 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.071 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/07 10:55:06.073 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=6.011958ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.084 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.096 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/07 10:55:06.096 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.100 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:55:06.106 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.102 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.106 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.102 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:55:06.120 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.102 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.130 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=1.138084ms] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.132 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.132 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/07 10:55:06.133 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.05475ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.102 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.146 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.102 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.153 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/07 10:55:06.153 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.154 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/07 10:55:06.164 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.16 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.164 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.16 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/07 10:55:06.174 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.16 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.185 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=727.667µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.187 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.187 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/07 10:55:06.188 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.042125ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.16 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.196 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.16 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.202 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/07 10:55:06.202 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.203 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/07 10:55:06.209 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.209 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/07 10:55:06.222 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.228 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=508.583µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.230 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.230 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/07 10:55:06.232 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.041ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.246 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.252 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/07 10:55:06.252 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.253 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/07 10:55:06.260 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.260 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/07 10:55:06.271 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.284 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.450833ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.286 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.286 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/07 10:55:06.288 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=6.048875ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.297 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.309 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/07 10:55:06.309 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.310 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/07 10:55:06.316 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.312 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.316 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.312 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/07 10:55:06.327 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.312 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.338 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=1.064958ms] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.340 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.340 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/07 10:55:06.340 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.040375ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.312 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.350 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.312 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.357 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/07 10:55:06.357 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.358 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/07 10:55:06.364 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.361 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.364 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.361 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/07 10:55:06.376 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.361 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.386 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=972.25µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.388 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.388 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/07 10:55:06.389 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.031709ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.361 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.399 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.361 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.406 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/07 10:55:06.406 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.407 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/07 10:55:06.413 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.409 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.413 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.409 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/07 10:55:06.424 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.409 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.435 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=968.5µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.437 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.437 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/07 10:55:06.438 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.019417ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.409 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.446 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.409 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.453 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/07 10:55:06.453 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.456 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/07 10:55:06.461 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.461 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/07 10:55:06.472 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.492 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=1.011709ms] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.498 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.498 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/07 10:55:06.498 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=8.043542ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.507 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.513 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/07 10:55:06.513 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.514 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:55:06.520 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.516 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.520 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.516 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/07 10:55:06.530 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.516 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.543 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=951.292µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.545 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.545 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/07 10:55:06.545 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.044041ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.516 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.554 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.516 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.560 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/07 10:55:06.561 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.561 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/07 10:55:06.567 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.564 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.567 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.564 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/07 10:55:06.582 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.564 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.591 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=801.083µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.593 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.593 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/07 10:55:06.594 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.04075ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.564 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.602 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.564 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.609 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/07 10:55:06.609 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.610 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/07 10:55:06.610 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/07 10:55:06.620 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.614 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.620 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.614 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/07 10:55:06.631 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.614 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.642 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=1.158291ms] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.645 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.645 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/07 10:55:06.645 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.076125ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.614 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.653 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.614 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.661 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/07 10:55:06.661 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.663 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:55:06.673 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.668 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.673 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.668 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:55:06.688 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.668 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.700 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.321583ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.702 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.702 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/07 10:55:06.702 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.041208ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.668 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.714 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.668 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.722 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/07 10:55:06.722 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.723 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/07 10:55:06.729 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.729 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/07 10:55:06.739 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.752 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.360708ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.757 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.757 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/07 10:55:06.758 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=8.018792ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.768 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.725 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.776 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/07 10:55:06.776 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.777 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/07 10:55:06.786 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.786 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/07 10:55:06.795 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.816 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.858417ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.818 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.818 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/07 10:55:06.820 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=6.036708ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.830 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.78 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.831 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:55:06.832 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:55:06.832 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:55:06.841 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/07 10:55:06.841 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.842 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/07 10:55:06.852 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.852 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/07 10:55:06.873 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.880 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=602.292µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/07 10:55:06.882 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.882 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/07 10:55:06.883 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.083208ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.900 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.905 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/07 10:55:06.905 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.917 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:55:06.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.917 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:55:06.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/07 10:55:06.928 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.943 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=1.244833ms] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/07 10:55:06.945 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:06.945 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/07 10:55:06.945 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.040667ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-07 10:55:06.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.956 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:06.964 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/07 10:55:06.964 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:06.965 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/07 10:55:06.972 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.968 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:06.972 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.968 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/07 10:55:06.989 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.968 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.002 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=1.153875ms] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.004 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.004 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/07 10:55:07.004 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.035292ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:06.968 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.013 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:06.968 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.020 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/07 10:55:07.020 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.021 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/07 10:55:07.030 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/07 10:55:07.030 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.040 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.052 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=857.959µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.054 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.054 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/07 10:55:07.055 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.038334ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.068 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.076 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/07 10:55:07.076 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.077 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/07 10:55:07.086 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.08 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.086 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.08 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/07 10:55:07.097 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.08 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.106 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=842.5µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.109 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.109 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/07 10:55:07.111 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=6.0415ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.08 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.120 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.08 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.127 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/07 10:55:07.127 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.129 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/07 10:55:07.141 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.141 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/07 10:55:07.163 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.184 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=2.299917ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.187 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.187 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/07 10:55:07.188 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=6.059792ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.201 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.215 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/07 10:55:07.215 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.216 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/07 10:55:07.228 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.221 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.228 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.221 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/07 10:55:07.240 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.221 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.260 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=2.1095ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.262 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.262 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/07 10:55:07.263 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.031083ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.221 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.276 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.221 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.292 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/07 10:55:07.292 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.293 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/07 10:55:07.303 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.303 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/07 10:55:07.315 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.340 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=2.891875ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.344 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.344 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/07 10:55:07.344 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=8.564583ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.370 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.385 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/07 10:55:07.385 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.386 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/07 10:55:07.399 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.399 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/07 10:55:07.421 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.445 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=2.52625ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.448 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.448 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/07 10:55:07.450 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=8.061542ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.487 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.504 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/07 10:55:07.504 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.505 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/07 10:55:07.524 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/07 10:55:07.524 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.546 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.577 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=3.072459ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.583 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.583 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/07 10:55:07.584 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=10.042916ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.611 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.628 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/07 10:55:07.628 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.630 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/07 10:55:07.653 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.635 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.653 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.635 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/07 10:55:07.668 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.635 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.706 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=7.671291ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.709 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.709 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/07 10:55:07.711 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=14.048084ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.635 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.736 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.635 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.770 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/07 10:55:07.770 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.771 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:55:07.789 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.779 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.789 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.779 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:55:07.829 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.779 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.834 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/07 10:55:07.843 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:698\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/07 10:55:07.853 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=3.202416ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.859 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.859 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/07 10:55:07.860 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=10.099125ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.779 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.881 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.779 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.906 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/07 10:55:07.906 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:07.908 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:55:07.939 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.93 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:07.939 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.93 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:55:07.956 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.93 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:07.975 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.374625ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/07 10:55:07.981 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:07.981 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/07 10:55:07.987 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=13.210125ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:07.93 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.046 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:07.93 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.060 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/07 10:55:08.060 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:08.064 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/07 10:55:08.095 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.073 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:08.095 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.073 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/07 10:55:08.118 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:08.073 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.285 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.764875ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/07 10:55:08.288 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:08.288 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/07 10:55:08.290 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=16.323958ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.073 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.305 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:08.073 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.319 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/07 10:55:08.319 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:08.320 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/07 10:55:08.328 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.323 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/07 10:55:08.328 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.323 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/07 10:55:08.339 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:08.323 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.354 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.623042ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/07 10:55:08.357 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/07 10:55:08.357 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/07 10:55:08.358 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=6.026083ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-07 10:55:08.323 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.368 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-07 10:55:08.323 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/07 10:55:08.378 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/07 10:55:08.378 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/07 10:55:08.484 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=3.651528292s]
[2023/08/07 10:55:08.831 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=701e05ef-ada5-43c5-ace7-bab36eae6382] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:55:08.831 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:08.831 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 26, tp add index"] [category=ddl] ["take time"=34.917µs]
[2023/08/07 10:55:08.832 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 27, tp add index"] [category=ddl] ["take time"=23.459µs]
[2023/08/07 10:55:08.832 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:08.832 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 25, tp general"] [category=ddl] ["take time"=5.375µs]
[2023/08/07 10:55:08.832 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:55:08.832 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:55:08.840 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=701e05ef-ada5-43c5-ace7-bab36eae6382] ["take time"=355.680875ms]
[2023/08/07 10:55:08.840 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=701e05ef-ada5-43c5-ace7-bab36eae6382]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:08.840 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:08.840 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:08.841 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=356.208333ms]
[2023/08/07 10:55:08.841 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=dfba2444-69ad-4436-8ec2-826110d5e761] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:55:08.841 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:55:08.841 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:55:08.921 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=64.211667ms]
[2023/08/07 10:55:08.922 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:55:08.922 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678] [runWorker=true]
[2023/08/07 10:55:08.922 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:55:08.922 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:55:08.923 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:08.923 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:08.923 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:08.923 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:08.923 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:55:08.924 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:55:08.930 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:08.930 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:08.930 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:55:08.956 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:08.963 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:08.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:08.966 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:55:08.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:08.966 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:08.968 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:08.968 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:08.968 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:08.968 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:08.968 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:55:08.968 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=dfba2444-69ad-4436-8ec2-826110d5e761] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:55:08.969 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:55:08.969 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:55:08.972 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:55:09.068 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=78.665833ms]
[2023/08/07 10:55:09.068 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:55:09.068 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6] [runWorker=true]
[2023/08/07 10:55:09.069 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:55:09.069 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:55:09.069 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:09.069 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:09.069 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:55:09.072 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:09.074 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:09.074 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:09.075 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:55:09.101 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:09.108 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:09.113 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:09.113 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:55:09.114 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:09.114 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:09.115 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:09.115 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:09.115 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:55:09.115 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:09.115 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=dfba2444-69ad-4436-8ec2-826110d5e761] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/07 10:55:09.115 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:09.115 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/07 10:55:09.116 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/07 10:55:09.120 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/07 10:55:09.200 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=68.277667ms]
[2023/08/07 10:55:09.201 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/07 10:55:09.201 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446] [runWorker=true]
[2023/08/07 10:55:09.202 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/07 10:55:09.202 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:09.202 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:09.202 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:09.202 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:09.202 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/07 10:55:09.208 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:09.208 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:09.209 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/07 10:55:09.232 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:09.237 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:09.240 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:09.240 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/07 10:55:09.241 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:09.241 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:09.242 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:09.242 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:09.242 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/07 10:55:09.242 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[2252e37b-9f22-4c75-a774-9919dad12678,967dc8a7-ec9b-4877-be24-77f7d86238b6,12c25503-e89f-4cbb-b8ed-a0c0a72df446]"]
[2023/08/07 10:55:09.242 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:09.243 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/07 10:55:09.252 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:09.252 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:55:10.242 +08:00] [INFO] [dispatcher_manager.go:128] ["dispatch task loop start"]
[2023/08/07 10:55:10.243 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/07 10:55:10.243 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/07 10:55:10.547 +08:00] [INFO] [dispatcher.go:84] ["execute one task"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8]
[2023/08/07 10:55:10.923 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:55:11.048 +08:00] [INFO] [dispatcher.go:174] ["handle pending state"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [stage=-1]
[2023/08/07 10:55:11.048 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/07 10:55:11.053 +08:00] [INFO] [dispatcher.go:139] ["mockOwnerChange called"] [dispatcher="task_id: 1, task_type: Example"]
[2023/08/07 10:55:11.069 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:55:11.074 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/07 10:55:11.074 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/07 10:55:11.081 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/07 10:55:11.081 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/07 10:55:11.202 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/07 10:55:11.221 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/07 10:55:11.221 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/07 10:55:11.242 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=12c25503-e89f-4cbb-b8ed-a0c0a72df446]
[2023/08/07 10:55:11.242 +08:00] [INFO] [dispatcher_manager.go:134] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/07 10:55:11.242 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/07 10:55:11.348 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4002] [id=1]
[2023/08/07 10:55:11.348 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4002] [id=1] [type=Example]
[2023/08/07 10:55:11.378 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:55:11.382 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/07 10:55:11.382 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.382 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.382 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.524 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4001, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:55:11.533 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4001, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/07 10:55:11.533 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.533 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.533 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.651 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4002, task_id: 1"] [step=1] [concurrency=8]
[2023/08/07 10:55:11.655 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4002, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/07 10:55:11.655 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.655 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.655 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/07 10:55:11.968 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/07 10:55:11.968 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/07 10:55:11.968 +08:00] [INFO] [dispatcher_manager.go:128] ["dispatch task loop start"]
[2023/08/07 10:55:12.054 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=1]
[2023/08/07 10:55:12.059 +08:00] [INFO] [dispatcher.go:198] ["previous stage finished, generate dist plan"] [dispatcher="task_id: 1, task_type: Example"] [stage=1]
[2023/08/07 10:55:12.059 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [concurrency=8] [subtasks=1]
[2023/08/07 10:55:12.063 +08:00] [INFO] [dispatcher.go:105] ["schedule task exits"] [dispatcher="task_id: 1, task_type: Example"] [error="context canceled"]
[2023/08/07 10:55:12.063 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=12c25503-e89f-4cbb-b8ed-a0c0a72df446]
[2023/08/07 10:55:12.266 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4002, task_id: 1"] [step=2] [concurrency=8]
[2023/08/07 10:55:12.274 +08:00] [INFO] [scheduler.go:180] ["split subTask"] [scheduler="id: :4002, task_id: 1"] [cnt=3] [subtask-id=4]
[2023/08/07 10:55:12.274 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:55:12.274 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:55:12.274 +08:00] [INFO] [scheduler.go:229] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=2] [minimal-task=]
[2023/08/07 10:55:12.274 +08:00] [INFO] [dispatcher.go:84] ["execute one task"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [concurrency=8]
[2023/08/07 10:55:12.775 +08:00] [INFO] [dispatcher.go:179] ["handle running state"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [stage=2]
[2023/08/07 10:55:12.780 +08:00] [INFO] [dispatcher.go:198] ["previous stage finished, generate dist plan"] [dispatcher="task_id: 1, task_type: Example"] [stage=2]
[2023/08/07 10:55:12.780 +08:00] [INFO] [dispatcher.go:286] ["dispatch subtasks"] [dispatcher="task_id: 1, task_type: Example"] [state=running] [concurrency=8] [subtasks=0]
[2023/08/07 10:55:12.882 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4002] [id=1] [state=succeed]
[2023/08/07 10:55:12.901 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=succeed]
[2023/08/07 10:55:13.052 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=succeed]
[2023/08/07 10:55:13.275 +08:00] [INFO] [dispatcher.go:130] ["schedule task, task is finished"] [dispatcher="task_id: 1, task_type: Example"] [state=succeed]
[2023/08/07 10:55:13.968 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/07 10:55:13.968 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=2252e37b-9f22-4c75-a774-9919dad12678]
[2023/08/07 10:55:13.968 +08:00] [INFO] [dispatcher_manager.go:134] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/07 10:55:13.968 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=2252e37b-9f22-4c75-a774-9919dad12678]
[2023/08/07 10:55:14.055 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 30, tp add index"] [category=ddl] ["take time"=8.708µs]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 29, tp add index"] [category=ddl] ["take time"=2.667µs]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 28, tp general"] [category=ddl] ["take time"=16.208µs]
[2023/08/07 10:55:14.055 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:55:14.055 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678] ["take time"=802.838791ms]
[2023/08/07 10:55:14.055 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678]
[2023/08/07 10:55:14.055 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.055 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.055 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.055 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.055 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.055 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.056 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.056 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.056 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.056 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.056 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:14.057 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:14.057 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:55:14.057 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:14.069 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:55:14.069 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.069 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.069 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:55:14.069 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:55:14.069 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6] ["take time"=816.813458ms]
[2023/08/07 10:55:14.069 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6]
[2023/08/07 10:55:14.069 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.069 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.069 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.069 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.069 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.069 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.069 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.069 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.070 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.070 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.070 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:55:14.071 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:14.071 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:14.071 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/07 10:55:14.071 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:55:14.071 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:14.072 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:55:14.072 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:14.073 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:14.075 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:55:14.075 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:55:14.075 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:14.114 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=967dc8a7-ec9b-4877-be24-77f7d86238b6] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:55:14.114 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:14.114 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=861.86625ms]
[2023/08/07 10:55:14.243 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 33, tp add index"] [category=ddl] ["take time"=15.417µs]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 32, tp add index"] [category=ddl] ["take time"=9.583µs]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 31, tp general"] [category=ddl] ["take time"=3.833µs]
[2023/08/07 10:55:14.244 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/07 10:55:14.244 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446] ["take time"=991.768125ms]
[2023/08/07 10:55:14.244 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446]
[2023/08/07 10:55:14.244 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.244 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/07 10:55:14.244 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.244 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/07 10:55:14.246 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4002]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4002]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/07 10:55:14.246 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/07 10:55:14.246 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/07 10:55:14.930 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:55:14.931 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:55:14.931 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:14.966 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=2252e37b-9f22-4c75-a774-9919dad12678] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:55:14.967 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:14.967 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.714564459s]
[2023/08/07 10:55:15.209 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446] [ownerKey=/tidb/bindinfo/owner]
[2023/08/07 10:55:15.209 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/07 10:55:15.209 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/07 10:55:15.241 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=12c25503-e89f-4cbb-b8ed-a0c0a72df446] [ownerKey=/tidb/stats/owner]
[2023/08/07 10:55:15.241 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/07 10:55:15.242 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.9891925s]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/07 10:55:15.281 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestOwnerChange (10.74s)
PASS
ok  	github.com/pingcap/tidb/disttask/framework	42.558s
